<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developing Serverless Solutions on AWS - Day 2</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/theme/white.min.css">
    <style>
        :root {
            --primary-color: #232F3E;
            --secondary-color: #FF9900;
            --accent-color: #146EB4;
            --light-gray: #F2F3F3;
            --text-dark: #232F3E;
        }

        .reveal {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .reveal .slides {
            text-align: left;
        }

        .reveal h1, .reveal h2, .reveal h3 {
            color: var(--primary-color);
            font-weight: 600;
        }

        .reveal h1 {
            background: var(--light-gray);
            padding: 30px;
            border-radius: 8px;
            text-align: center;
            font-size: 2.2em;
            margin-bottom: 30px;
        }

        .session-header {
            background: var(--light-gray);
            color: var(--text-dark);
            padding: 15px 25px;
            border-radius: 6px;
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }

        .reveal h2 {
            font-size: 1.5em;
            margin-bottom: 18px;
            color: var(--primary-color);
        }

        .reveal .slides section {
            padding: 18px;
            height: 100vh;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        .two-column {
            display: flex;
            gap: 25px;
            align-items: flex-start;
            flex: 1;
        }

        .column {
            flex: 1;
        }

        .three-column {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 15px 0;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 12px 0;
        }

        .feature-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid var(--secondary-color);
        }

        .feature-item h4 {
            color: var(--primary-color);
            margin-bottom: 6px;
            font-size: 0.95em;
        }

        .feature-item p {
            margin: 0;
            font-size: 0.75em;
            line-height: 1.2;
        }

        .service-box {
            background: var(--light-gray);
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 10px;
            border-left: 4px solid var(--accent-color);
        }

        .service-box h4 {
            color: var(--primary-color);
            margin-bottom: 6px;
            font-size: 0.95em;
        }

        .key-concept {
            background: #e8f4f8;
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid var(--accent-color);
            margin: 12px 0;
        }

        .key-concept h4 {
            color: var(--primary-color);
            margin-bottom: 6px;
            font-size: 0.9em;
        }

        .bullet-point {
            margin: 4px 0;
            padding-left: 0;
            font-size: 0.8em;
        }

        .highlight {
            color: var(--secondary-color);
            font-weight: 600;
        }

        .lab-callout {
            background: linear-gradient(135deg, #FF9900, #FFB84D);
            color: white;
            padding: 35px;
            border-radius: 12px;
            text-align: center;
            font-size: 1.2em;
            font-weight: 600;
            margin: 25px 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 180px;
        }

        .lab-duration {
            font-size: 0.75em;
            opacity: 0.9;
            margin-top: 12px;
        }

        .break-slide {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            text-align: center;
            padding: 50px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .break-slide h2 {
            color: white;
            font-size: 2.8em;
            margin-bottom: 18px;
        }

        .code-snippet {
            background: #2d3748;
            color: #e2e8f0;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.65em;
            margin: 8px 0;
            overflow-x: auto;
            line-height: 1.3;
        }

        .best-practice {
            background: #f0f9ff;
            border-left: 4px solid #0ea5e9;
            padding: 10px;
            margin: 8px 0;
            border-radius: 0 5px 5px 0;
        }

        .security-highlight {
            background: #fef7f0;
            border-left: 4px solid #ea580c;
            padding: 10px;
            margin: 8px 0;
            border-radius: 0 5px 5px 0;
        }

        .optimization-tip {
            background: #f0fdf4;
            border-left: 4px solid #16a34a;
            padding: 10px;
            margin: 8px 0;
            border-radius: 0 5px 5px 0;
        }

        .architecture-diagram {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 6px;
            border: 2px solid #e9ecef;
            margin: 8px 0;
            text-align: center;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 0.75em;
        }

        .comparison-table th,
        .comparison-table td {
            border: 1px solid #ddd;
            padding: 6px;
            text-align: left;
        }

        .comparison-table th {
            background-color: var(--light-gray);
            font-weight: 600;
        }

        .metrics-box {
            background: #fff8e1;
            border-left: 4px solid #ffa726;
            padding: 10px;
            margin: 8px 0;
            border-radius: 0 5px 5px 0;
        }

        .workflow-step {
            background: #e3f2fd;
            padding: 8px;
            margin: 5px 0;
            border-radius: 5px;
            border-left: 3px solid #2196f3;
            font-size: 0.8em;
        }

        ul {
            margin: 0;
            padding-left: 16px;
        }

        li {
            margin: 4px 0;
            font-size: 0.8em;
        }

        .reveal .progress {
            color: var(--secondary-color);
        }

        .reveal .controls {
            color: var(--primary-color);
        }

        p {
            font-size: 0.8em;
            line-height: 1.3;
            margin: 6px 0;
        }

        .sub-section {
            margin: 10px 0;
        }

        .sub-section h4 {
            font-size: 0.9em;
            margin-bottom: 6px;
            color: var(--accent-color);
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <!-- Slide 1: Title Slide -->
            <section>
                <h1>Developing Serverless Solutions on AWS</h1>
                <h2 style="text-align: center; color: var(--accent-color);">Day 2: Functions, Orchestration, and Monitoring</h2>
                <div style="text-align: center; margin-top: 25px;">
                    <p style="font-size: 1.0em; color: var(--primary-color);">Advanced Integration Patterns and Observability</p>
                    <p style="font-size: 0.8em; margin-top: 15px;">Building upon Day 1's foundational concepts</p>
                </div>
            </section>

            <!-- Slide 2: Day 1 Recap -->
            <section>
                <h2>Day 1 Comprehensive Recap</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="service-box">
                            <h4>Core Foundations Established</h4>
                            <ul>
                                <li class="bullet-point">Serverless computing principles and AWS Lambda fundamentals</li>
                                <li class="bullet-point">API Gateway REST and HTTP API implementations</li>
                                <li class="bullet-point">Amazon Cognito authentication and authorization flows</li>
                                <li class="bullet-point">Infrastructure as Code with AWS SAM and CloudFormation</li>
                                <li class="bullet-point">Event-driven architecture with EventBridge and SNS</li>
                                <li class="bullet-point">Asynchronous processing with SQS queues and Kinesis streams</li>
                            </ul>
                        </div>

                        <div class="key-concept">
                            <h4>Day 1 Lab Accomplishments</h4>
                            <ul>
                                <li class="bullet-point">Lab 1: Simple serverless application deployment</li>
                                <li class="bullet-point">Lab 2: Infrastructure as Code implementation</li>
                                <li class="bullet-point">Lab 3: EventBridge message fan-out patterns</li>
                                <li class="bullet-point">Lab 4: Queue and stream processing systems</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="service-box">
                            <h4>Day 2 Advanced Journey</h4>
                            <ul>
                                <li class="bullet-point">Lambda function optimization and performance tuning</li>
                                <li class="bullet-point">Complex workflow orchestration with Step Functions</li>
                                <li class="bullet-point">Comprehensive observability and monitoring strategies</li>
                                <li class="bullet-point">Multi-layer security architecture implementation</li>
                                <li class="bullet-point">Advanced error handling and resilience patterns</li>
                                <li class="bullet-point">Production-ready deployment and scaling techniques</li>
                            </ul>
                        </div>

                        <div class="metrics-box">
                            <h4>Learning Progression Metrics</h4>
                            <ul>
                                <li class="bullet-point">4 foundational labs completed successfully</li>
                                <li class="bullet-point">6 core AWS services hands-on experience</li>
                                <li class="bullet-point">Multiple deployment frameworks explored</li>
                                <li class="bullet-point">Event-driven patterns implemented</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 3: Day 2 Detailed Learning Objectives -->
            <section>
                <h2>Day 2 Comprehensive Learning Objectives</h2>
                <div class="feature-grid">
                    <div class="feature-item">
                        <h4>Lambda Function Mastery</h4>
                        <p>Advanced performance optimization, memory management, cold start mitigation, error handling strategies, and production best practices</p>
                    </div>
                    <div class="feature-item">
                        <h4>Workflow Orchestration Excellence</h4>
                        <p>Complex business process design using Step Functions, state machine patterns, parallel processing, and callback implementations</p>
                    </div>
                    <div class="feature-item">
                        <h4>Observability and Monitoring</h4>
                        <p>Three pillars implementation with CloudWatch, X-Ray distributed tracing, structured logging, and proactive alerting systems</p>
                    </div>
                    <div class="feature-item">
                        <h4>Security Architecture</h4>
                        <p>Multi-layer security controls, IAM best practices, data protection, compliance automation, and audit trail implementation</p>
                    </div>
                </div>
                
                <div class="two-column" style="margin-top: 15px;">
                    <div class="column">
                        <div class="optimization-tip">
                            <h4>Advanced Concepts Focus</h4>
                            <ul>
                                <li class="bullet-point">Production-ready implementation patterns</li>
                                <li class="bullet-point">Enterprise-scale architecture design</li>
                                <li class="bullet-point">Cost optimization strategies</li>
                                <li class="bullet-point">Performance tuning methodologies</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="best-practice">
                            <h4>Real-World Application</h4>
                            <ul>
                                <li class="bullet-point">Industry best practices implementation</li>
                                <li class="bullet-point">Scalability and reliability patterns</li>
                                <li class="bullet-point">Operational excellence principles</li>
                                <li class="bullet-point">DevOps integration strategies</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 4: Day 2 Architecture Overview -->
            <section>
                <h2>Day 2 Architecture Patterns Overview</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="architecture-diagram">
                            <h4>Advanced Serverless Architecture</h4>
                            <p style="font-family: monospace; font-size: 0.7em;">
                                API Gateway → Lambda (Optimized)<br>
                                ↓<br>
                                Step Functions → Parallel Workflows<br>
                                ├─ Payment Processing<br>
                                ├─ Inventory Management<br>
                                └─ Notification Services<br>
                                ↓<br>
                                CloudWatch + X-Ray → Monitoring<br>
                                ↓<br>
                                Security Controls → Compliance
                            </p>
                        </div>

                        <div class="service-box">
                            <h4>Integration Complexity</h4>
                            <ul>
                                <li class="bullet-point">Multi-service orchestration patterns</li>
                                <li class="bullet-point">Event-driven microservices communication</li>
                                <li class="bullet-point">Asynchronous processing workflows</li>
                                <li class="bullet-point">Data consistency and transaction management</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>Performance Optimization Focus</h4>
                            <ul>
                                <li class="bullet-point">Lambda cold start optimization techniques</li>
                                <li class="bullet-point">Memory and CPU allocation strategies</li>
                                <li class="bullet-point">Connection pooling and resource reuse</li>
                                <li class="bullet-point">Concurrency management and throttling</li>
                            </ul>
                        </div>

                        <div class="sub-section">
                            <h4>Monitoring and Observability</h4>
                            <ul>
                                <li class="bullet-point">Distributed tracing across service boundaries</li>
                                <li class="bullet-point">Custom metrics and business KPI tracking</li>
                                <li class="bullet-point">Log aggregation and correlation strategies</li>
                                <li class="bullet-point">Proactive alerting and incident response</li>
                            </ul>
                        </div>

                        <div class="sub-section">
                            <h4>Security and Compliance</h4>
                            <ul>
                                <li class="bullet-point">Defense-in-depth security implementation</li>
                                <li class="bullet-point">Zero-trust architecture principles</li>
                                <li class="bullet-point">Data encryption and key management</li>
                                <li class="bullet-point">Audit trail and compliance automation</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 5: Module 7 Introduction -->
            <section>
                <div class="session-header">Module 7: Writing Good Lambda Functions</div>
                <h2>Lambda Function Architecture and Lifecycle</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>Lambda Execution Environment</h4>
                            <ul>
                                <li class="bullet-point"><span class="highlight">Initialization Phase:</span> Container startup, runtime loading, handler initialization</li>
                                <li class="bullet-point"><span class="highlight">Execution Phase:</span> Handler function processing and response generation</li>
                                <li class="bullet-point"><span class="highlight">Cleanup Phase:</span> Resource cleanup and container freezing</li>
                                <li class="bullet-point"><span class="highlight">Container Reuse:</span> Warm start optimization opportunities</li>
                            </ul>
                        </div>

                        <div class="sub-section">
                            <h4>Cold Start Impact Analysis</h4>
                            <ul>
                                <li class="bullet-point">Runtime initialization overhead comparison</li>
                                <li class="bullet-point">Package size impact on startup time</li>
                                <li class="bullet-point">VPC configuration performance implications</li>
                                <li class="bullet-point">Provisioned concurrency cost-benefit analysis</li>
                            </ul>
                        </div>

                        <div class="metrics-box">
                            <h4>Performance Benchmarks</h4>
                            <ul>
                                <li class="bullet-point">Cold start times by runtime (Node.js: ~100ms, Python: ~150ms, Java: ~500ms)</li>
                                <li class="bullet-point">Memory allocation impact on CPU performance</li>
                                <li class="bullet-point">Network latency considerations for external calls</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>Function Configuration Optimization</h4>
                            <ul>
                                <li class="bullet-point">Memory allocation strategies (128MB to 10GB)</li>
                                <li class="bullet-point">Timeout configuration best practices</li>
                                <li class="bullet-point">Environment variable management</li>
                                <li class="bullet-point">Lambda layers implementation</li>
                                <li class="bullet-point">Version and alias deployment strategies</li>
                            </ul>
                        </div>

                        <div class="sub-section">
                            <h4>Concurrency Management</h4>
                            <ul>
                                <li class="bullet-point">Reserved vs provisioned concurrency</li>
                                <li class="bullet-point">Throttling behavior and error handling</li>
                                <li class="bullet-point">Dead letter queue configuration</li>
                                <li class="bullet-point">Event source mapping tuning</li>
                            </ul>
                        </div>

                        <div class="optimization-tip">
                            <h4>Resource Utilization Patterns</h4>
                            <ul>
                                <li class="bullet-point">CPU-bound vs I/O-bound workload optimization</li>
                                <li class="bullet-point">Memory vs execution time trade-offs</li>
                                <li class="bullet-point">Network connection pooling strategies</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 6: Lambda Code Optimization Techniques -->
            <section>
                <h2>Advanced Lambda Code Optimization</h2>
                <div class="two-column">
                    <div class="column">
                        <h3>Initialization Optimization</h3>
                        <div class="code-snippet">
# ❌ Inefficient Pattern
def lambda_handler(event, context):
    import boto3
    import pandas as pd
    import requests
    
    # Heavy initialization inside handler
    dynamodb = boto3.resource('dynamodb')
    table = dynamodb.Table('UserData')
    
    # Process event
    return process_data(event, table)

# ✅ Optimized Pattern
import boto3
import pandas as pd
import requests
from functools import lru_cache

# Initialize outside handler
dynamodb = boto3.resource('dynamodb')
table = dynamodb.Table('UserData')

# Cache expensive operations
@lru_cache(maxsize=128)
def get_config(config_key):
    return ssm.get_parameter(Name=config_key)['Parameter']['Value']

def lambda_handler(event, context):
    # Fast execution path
    return process_data(event, table)
                        </div>

                        <div class="optimization-tip">
                            <h4>Memory vs CPU Optimization</h4>
                            <ul>
                                <li class="bullet-point">Monitor CloudWatch Duration and Max Memory Used</li>
                                <li class="bullet-point">Test memory allocations: 512MB, 1GB, 2GB, 3GB</li>
                                <li class="bullet-point">Calculate cost per execution vs performance gain</li>
                                <li class="bullet-point">Use AWS Lambda Power Tuning tool for optimization</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <h3>Connection Management Best Practices</h3>
                        <div class="code-snippet">
import pymysql
import redis
from urllib3.util.retry import Retry
from urllib3 import PoolManager

# Global connection pools
db_connection = None
redis_client = None
http_client = PoolManager(
    num_pools=10,
    maxsize=20,
    retries=Retry(total=3, backoff_factor=0.3)
)

def get_db_connection():
    global db_connection
    if db_connection is None or not db_connection.open:
        db_connection = pymysql.connect(
            host=os.environ['DB_HOST'],
            user=os.environ['DB_USER'],
            password=os.environ['DB_PASSWORD'],
            database=os.environ['DB_NAME'],
            charset='utf8mb4',
            connect_timeout=5,
            read_timeout=10,
            autocommit=True
        )
    return db_connection

def get_redis_client():
    global redis_client
    if redis_client is None:
        redis_client = redis.Redis(
            host=os.environ['REDIS_HOST'],
            port=6379,
            decode_responses=True,
            socket_connect_timeout=5,
            socket_timeout=5,
            connection_pool_kwargs={'max_connections': 20}
        )
    return redis_client

def lambda_handler(event, context):
    try:
        db = get_db_connection()
        cache = get_redis_client()
        
        # Process with reused connections
        result = process_with_connections(event, db, cache)
        return result
        
    except Exception as e:
        logger.error(f"Processing failed: {str(e)}")
        raise
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 7: Lambda Error Handling Strategies -->
            <section>
                <h2>Comprehensive Lambda Error Handling</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>Error Classification and Handling</h4>
                            <ul>
                                <li class="bullet-point"><span class="highlight">Retryable Errors:</span> Network timeouts, service throttling, temporary unavailability</li>
                                <li class="bullet-point"><span class="highlight">Non-retryable Errors:</span> Validation failures, permission errors, business logic violations</li>
                                <li class="bullet-point"><span class="highlight">Fatal Errors:</span> Configuration issues, code bugs, dependency failures</li>
                                <li class="bullet-point"><span class="highlight">Transient Errors:</span> Database connection issues, external API failures</li>
                            </ul>
                        </div>

                        <div class="code-snippet">
import json
import logging
from enum import Enum
from typing import Dict, Any, List

class ErrorType(Enum):
    RETRYABLE = "retryable"
    NON_RETRYABLE = "non_retryable"
    FATAL = "fatal"

class LambdaError(Exception):
    def __init__(self, message: str, error_type: ErrorType, details: Dict = None):
        self.message = message
        self.error_type = error_type
        self.details = details or {}
        super().__init__(self.message)

def lambda_handler(event, context):
    failed_records = []
    successful_records = []
    
    try:
        for record in event.get('Records', []):
            try:
                result = process_record(record)
                successful_records.append({
                    'recordId': record.get('messageId', record.get('eventID')),
                    'result': result
                })
                
            except LambdaError as e:
                if e.error_type == ErrorType.RETRYABLE:
                    # Let Lambda retry automatically
                    raise e
                else:
                    # Log and continue processing
                    logger.error(f"Non-retryable error: {e.message}", extra=e.details)
                    failed_records.append({
                        'itemIdentifier': record.get('messageId', record.get('eventID')),
                        'errorCode': e.error_type.value,
                        'errorMessage': e.message
                    })
            
            except Exception as e:
                # Unknown error - treat as fatal
                logger.error(f"Unexpected error: {str(e)}")
                raise LambdaError(str(e), ErrorType.FATAL)
        
        return {
            'statusCode': 200,
            'processedRecords': len(successful_records),
            'failedRecords': len(failed_records),
            'batchItemFailures': failed_records
        }
        
    except LambdaError as e:
        if e.error_type == ErrorType.FATAL:
            # Fatal errors should fail the entire batch
            raise e
        return handle_partial_failure(successful_records, failed_records)
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>Event Source Error Handling</h4>
                            
                            <div class="workflow-step">
                                <strong>SQS Event Source Mapping</strong>
                                <ul>
                                    <li class="bullet-point">Batch size optimization (1-10 messages)</li>
                                    <li class="bullet-point">Visibility timeout configuration</li>
                                    <li class="bullet-point">Dead letter queue setup</li>
                                    <li class="bullet-point">Partial batch failure handling</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Kinesis Event Source Mapping</strong>
                                <ul>
                                    <li class="bullet-point">Shard-level retry behavior</li>
                                    <li class="bullet-point">Bisect on function error</li>
                                    <li class="bullet-point">Maximum record age handling</li>
                                    <li class="bullet-point">Parallelization factor tuning</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>DynamoDB Streams</strong>
                                <ul>
                                    <li class="bullet-point">Retry until record expiration</li>
                                    <li class="bullet-point">Batch size and parallelization</li>
                                    <li class="bullet-point">Error destination configuration</li>
                                    <li class="bullet-point">Tumbling window processing</li>
                                </ul>
                            </div>
                        </div>

                        <div class="best-practice">
                            <h4>Monitoring and Alerting</h4>
                            <ul>
                                <li class="bullet-point">CloudWatch custom metrics for error rates</li>
                                <li class="bullet-point">X-Ray tracing for error propagation</li>
                                <li class="bullet-point">SNS alerts for critical failures</li>
                                <li class="bullet-point">Dead letter queue monitoring</li>
                            </ul>
                        </div>

                        <div class="optimization-tip">
                            <h4>Try-it-out Exercise</h4>
                            <p>Configure Lambda functions with comprehensive error handling for multiple event sources including SQS, Kinesis, and DynamoDB Streams. Implement proper retry logic and monitoring.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 8: Lambda Versions and Deployment -->
            <section>
                <h2>Lambda Versions, Aliases, and Deployment Strategies</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>Version Management Strategy</h4>
                            <ul>
                                <li class="bullet-point"><span class="highlight">$LATEST:</span> Mutable version for development and testing</li>
                                <li class="bullet-point"><span class="highlight">Numbered Versions:</span> Immutable snapshots for production</li>
                                <li class="bullet-point"><span class="highlight">Aliases:</span> Mutable pointers to specific versions</li>
                                <li class="bullet-point"><span class="highlight">Weighted Aliases:</span> Traffic splitting for blue/green deployments</li>
                            </ul>
                        </div>

                        <div class="code-snippet">
# Create new version
aws lambda publish-version \
  --function-name MyFunction \
  --description "Production release v1.2.0"

# Create alias pointing to version
aws lambda create-alias \
  --function-name MyFunction \
  --name PROD \
  --function-version 5

# Update alias with traffic splitting
aws lambda update-alias \
  --function-name MyFunction \
  --name PROD \
  --routing-config '{
    "AdditionalVersionWeights": {
      "6": 0.1
    }
  }'

# API Gateway integration with alias
arn:aws:lambda:region:account:function:MyFunction:PROD
                        </div>

                        <div class="optimization-tip">
                            <h4>Deployment Best Practices</h4>
                            <ul>
                                <li class="bullet-point">Use aliases for environment separation</li>
                                <li class="bullet-point">Implement automated testing before promotion</li>
                                <li class="bullet-point">Monitor CloudWatch metrics during deployments</li>
                                <li class="bullet-point">Maintain rollback capabilities</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>Advanced Deployment Patterns</h4>
                            
                            <div class="workflow-step">
                                <strong>Blue/Green Deployment</strong>
                                <ul>
                                    <li class="bullet-point">Deploy new version alongside current</li>
                                    <li class="bullet-point">Gradually shift traffic using weighted aliases</li>
                                    <li class="bullet-point">Monitor error rates and performance metrics</li>
                                    <li class="bullet-point">Instant rollback capability</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Canary Deployment</strong>
                                <ul>
                                    <li class="bullet-point">Route small percentage to new version</li>
                                    <li class="bullet-point">Automated metrics monitoring</li>
                                    <li class="bullet-point">Gradual traffic increase based on success criteria</li>
                                    <li class="bullet-point">Automatic rollback on failure detection</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Linear Deployment</strong>
                                <ul>
                                    <li class="bullet-point">Time-based traffic shifting</li>
                                    <li class="bullet-point">Configurable shift intervals</li>
                                    <li class="bullet-point">Pre-deployment and post-deployment hooks</li>
                                    <li class="bullet-point">CloudWatch alarm integration</li>
                                </ul>
                            </div>
                        </div>

                        <div class="security-highlight">
                            <h4>Deployment Security</h4>
                            <ul>
                                <li class="bullet-point">Code signing and verification</li>
                                <li class="bullet-point">IAM permissions for deployment roles</li>
                                <li class="bullet-point">Encrypted environment variables</li>
                                <li class="bullet-point">VPC configuration management</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Lab 5 Callout -->
            <section>
                <div class="lab-callout">
                    <h2>🚀 Lab 5: Lambda Function Optimization</h2>
                    <p>Implementing Lambda best practices, performance optimization, and advanced error handling patterns</p>
                    <div class="lab-duration">Duration: 90 minutes</div>
                </div>
            </section>

            <!-- Slide 9: Module 8 Introduction -->
            <section>
                <div class="session-header">Module 8: Step Functions for Orchestration</div>
                <h2>AWS Step Functions Architecture and Patterns</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>Step Functions Core Concepts</h4>
                            <ul>
                                <li class="bullet-point"><span class="highlight">State Machines:</span> Visual workflow definition using Amazon States Language (ASL)</li>
                                <li class="bullet-point"><span class="highlight">States:</span> Individual steps in workflow execution</li>
                                <li class="bullet-point"><span class="highlight">Transitions:</span> Movement between states based on conditions</li>
                                <li class="bullet-point"><span class="highlight">Input/Output:</span> Data transformation and filtering capabilities</li>
                            </ul>
                        </div>

                        <div class="sub-section">
                            <h4>State Types and Capabilities</h4>
                            <ul>
                                <li class="bullet-point"><span class="highlight">Task:</span> Execute work (Lambda, AWS services, activities)</li>
                                <li class="bullet-point"><span class="highlight">Choice:</span> Conditional branching logic</li>
                                <li class="bullet-point"><span class="highlight">Parallel:</span> Concurrent execution branches</li>
                                <li class="bullet-point"><span class="highlight">Map:</span> Process arrays with dynamic parallelism</li>
                                <li class="bullet-point"><span class="highlight">Wait:</span> Delay execution for specified time</li>
                                <li class="bullet-point"><span class="highlight">Pass:</span> Transform input and inject static data</li>
                                <li class="bullet-point"><span class="highlight">Succeed/Fail:</span> Terminal states for workflow completion</li>
                            </ul>
                        </div>

                        <div class="architecture-diagram">
                            <h4>Complex Workflow Example</h4>
                            <p style="font-family: monospace; font-size: 0.65em;">
                                Start → ValidateInput<br>
                                ├─ Valid → ParallelProcessing<br>
                                │   ├─ ProcessPayment → UpdatePaymentDB<br>
                                │   ├─ CheckInventory → ReserveItems<br>
                                │   └─ SendNotifications → LogActivity<br>
                                │   → Wait(5sec) → ConfirmOrder<br>
                                └─ Invalid → RetryValidation<br>
                                    ├─ Retry → ValidateInput<br>
                                    └─ MaxRetries → FailOrder
                            </p>
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>Advanced Workflow Patterns</h4>
                            
                            <div class="workflow-step">
                                <strong>Saga Pattern Implementation</strong>
                                <ul>
                                    <li class="bullet-point">Distributed transaction management</li>
                                    <li class="bullet-point">Compensating actions for rollback</li>
                                    <li class="bullet-point">State tracking and recovery</li>
                                    <li class="bullet-point">Partial failure handling</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Fan-Out/Fan-In Pattern</strong>
                                <ul>
                                    <li class="bullet-point">Parallel processing of independent tasks</li>
                                    <li class="bullet-point">Result aggregation and correlation</li>
                                    <li class="bullet-point">Error isolation and handling</li>
                                    <li class="bullet-point">Dynamic parallelism with Map state</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Request-Response Pattern</strong>
                                <ul>
                                    <li class="bullet-point">Synchronous API integration</li>
                                    <li class="bullet-point">Timeout and retry configuration</li>
                                    <li class="bullet-point">Response validation and transformation</li>
                                    <li class="bullet-point">Error handling and fallback logic</li>
                                </ul>
                            </div>
                        </div>

                        <div class="optimization-tip">
                            <h4>Design Principles</h4>
                            <ul>
                                <li class="bullet-point">Keep state machines focused and cohesive</li>
                                <li class="bullet-point">Use meaningful state and transition names</li>
                                <li class="bullet-point">Implement proper error handling at each level</li>
                                <li class="bullet-point">Optimize for cost and performance</li>
                            </ul>
                        </div>

                        <div class="best-practice">
                            <h4>Try-it-out Exercise</h4>
                            <p>Create and test Step Functions states including Task, Choice, Parallel, and Map states with proper error handling and retry logic.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 10: Standard vs Express Workflows -->
            <section>
                <h2>Standard vs Express Workflows Comparison</h2>
                <div class="two-column">
                    <div class="column">
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th>Standard Workflows</th>
                                    <th>Express Workflows</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Maximum Duration</strong></td>
                                    <td>1 year</td>
                                    <td>5 minutes</td>
                                </tr>
                                <tr>
                                    <td><strong>Execution Rate</strong></td>
                                    <td>2,000/second</td>
                                    <td>100,000/second</td>
                                </tr>
                                <tr>
                                    <td><strong>State Transitions</strong></td>
                                    <td>4,000/second</td>
                                    <td>Nearly unlimited</td>
                                </tr>
                                <tr>
                                    <td><strong>Execution History</strong></td>
                                    <td>Full history retained</td>
                                    <td>CloudWatch Logs only</td>
                                </tr>
                                <tr>
                                    <td><strong>Pricing Model</strong></td>
                                    <td>Per state transition</td>
                                    <td>Per execution</td>
                                </tr>
                                <tr>
                                    <td><strong>Visual Debugging</strong></td>
                                    <td>Full console support</td>
                                    <td>Limited support</td>
                                </tr>
                                <tr>
                                    <td><strong>Execution Semantics</strong></td>
                                    <td>Exactly-once</td>
                                    <td>At-least-once</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="service-box">
                            <h4>Standard Workflow Use Cases</h4>
                            <ul>
                                <li class="bullet-point">Long-running business processes</li>
                                <li class="bullet-point">Human approval workflows</li>
                                <li class="bullet-point">Complex orchestration with audit requirements</li>
                                <li class="bullet-point">ETL and data processing pipelines</li>
                                <li class="bullet-point">Multi-step application deployment</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="service-box">
                            <h4>Express Workflow Use Cases</h4>
                            <ul>
                                <li class="bullet-point">High-volume event processing</li>
                                <li class="bullet-point">Real-time data transformation</li>
                                <li class="bullet-point">IoT device telemetry processing</li>
                                <li class="bullet-point">Microservice orchestration</li>
                                <li class="bullet-point">API request processing</li>
                            </ul>
                        </div>

                        <div class="sub-section">
                            <h4>Express Workflow Subtypes</h4>
                            
                            <div class="workflow-step">
                                <strong>Synchronous Express</strong>
                                <ul>
                                    <li class="bullet-point">Immediate response required</li>
                                    <li class="bullet-point">API Gateway integration</li>
                                    <li class="bullet-point">Request-response pattern</li>
                                    <li class="bullet-point">5-minute maximum duration</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Asynchronous Express</strong>
                                <ul>
                                    <li class="bullet-point">Fire-and-forget pattern</li>
                                    <li class="bullet-point">Event-driven processing</li>
                                    <li class="bullet-point">Higher throughput capabilities</li>
                                    <li class="bullet-point">EventBridge integration</li>
                                </ul>
                            </div>
                        </div>

                        <div class="optimization-tip">
                            <h4>Selection Criteria</h4>
                            <ul>
                                <li class="bullet-point">Duration requirements and workflow complexity</li>
                                <li class="bullet-point">Throughput and scalability needs</li>
                                <li class="bullet-point">Audit and compliance requirements</li>
                                <li class="bullet-point">Cost optimization considerations</li>
                                <li class="bullet-point">Integration patterns and use cases</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 11: Step Functions Direct Integrations -->
            <section>
                <h2>Step Functions Service Integrations</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>Optimized Service Integrations</h4>
                            <ul>
                                <li class="bullet-point"><span class="highlight">AWS Lambda:</span> Function invocation with payload transformation</li>
                                <li class="bullet-point"><span class="highlight">Amazon DynamoDB:</span> Direct CRUD operations</li>
                                <li class="bullet-point"><span class="highlight">Amazon SQS:</span> Message sending and receiving</li>
                                <li class="bullet-point"><span class="highlight">Amazon SNS:</span> Notification publishing</li>
                                <li class="bullet-point"><span class="highlight">Amazon EventBridge:</span> Event publishing to custom buses</li>
                                <li class="bullet-point"><span class="highlight">AWS Batch:</span> Job submission and monitoring</li>
                                <li class="bullet-point"><span class="highlight">Amazon ECS/Fargate:</span> Container task execution</li>
                                <li class="bullet-point"><span class="highlight">AWS Glue:</span> ETL job orchestration</li>
                            </ul>
                        </div>

                        <div class="code-snippet">
{
  "Comment": "Order processing with direct integrations",
  "StartAt": "ValidateOrder",
  "States": {
    "ValidateOrder": {
      "Type": "Task",
      "Resource": "arn:aws:states:::lambda:invoke",
      "Parameters": {
        "FunctionName": "ValidateOrderFunction",
        "Payload.$": "$"
      },
      "Next": "StoreOrderDetails"
    },
    "StoreOrderDetails": {
      "Type": "Task",
      "Resource": "arn:aws:states:::dynamodb:putItem",
      "Parameters": {
        "TableName": "Orders",
        "Item": {
          "orderId": {"S.$": "$.orderId"},
          "customerId": {"S.$": "$.customerId"},
          "status": {"S": "processing"},
          "timestamp": {"S.$": "$$.State.EnteredTime"},
          "orderData": {"S.$": "States.JsonToString($.orderDetails)"}
        }
      },
      "Next": "SendNotification"
    },
    "SendNotification": {
      "Type": "Task",
      "Resource": "arn:aws:states:::sns:publish",
      "Parameters": {
        "TopicArn": "arn:aws:sns:region:account:order-notifications",
        "Message.$": "States.Format('Order {} has been processed', $.orderId)",
        "MessageAttributes": {
          "orderType": {
            "DataType": "String",
            "StringValue.$": "$.orderType"
          }
        }
      },
      "End": true
    }
  }
}
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>Integration Patterns</h4>
                            
                            <div class="workflow-step">
                                <strong>Request-Response Pattern</strong>
                                <ul>
                                    <li class="bullet-point">Synchronous service invocation</li>
                                    <li class="bullet-point">Result processing and transformation</li>
                                    <li class="bullet-point">Error handling and retry logic</li>
                                    <li class="bullet-point">Timeout configuration</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Run Job Pattern (.sync)</strong>
                                <ul>
                                    <li class="bullet-point">Wait for job completion</li>
                                    <li class="bullet-point">Monitor job progress</li>
                                    <li class="bullet-point">Handle job failures</li>
                                    <li class="bullet-point">Resource optimization</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Callback Pattern (.waitForTaskToken)</strong>
                                <ul>
                                    <li class="bullet-point">External system integration</li>
                                    <li class="bullet-point">Human approval processes</li>
                                    <li class="bullet-point">Asynchronous processing</li>
                                    <li class="bullet-point">Timeout and error handling</li>
                                </ul>
                            </div>
                        </div>

                        <div class="best-practice">
                            <h4>Integration Benefits</h4>
                            <ul>
                                <li class="bullet-point">Reduced latency and improved performance</li>
                                <li class="bullet-point">Lower cost through reduced Lambda invocations</li>
                                <li class="bullet-point">Simplified architecture and reduced complexity</li>
                                <li class="bullet-point">Built-in error handling and retry capabilities</li>
                                <li class="bullet-point">Native service authentication and authorization</li>
                            </ul>
                        </div>

                        <div class="optimization-tip">
                            <h4>Try-it-out Exercise</h4>
                            <p>Troubleshoot Standard Step Functions workflow with direct service integrations, implementing proper error handling and retry logic.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 12: Callback Pattern Deep Dive -->
            <section>
                <h2>Callback Pattern Implementation and Use Cases</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>Callback Pattern Architecture</h4>
                            <ul>
                                <li class="bullet-point"><span class="highlight">Task Token:</span> Unique identifier for workflow pause point</li>
                                <li class="bullet-point"><span class="highlight">External Integration:</span> Third-party system or human workflow</li>
                                <li class="bullet-point"><span class="highlight">Callback Mechanism:</span> API calls to resume workflow</li>
                                <li class="bullet-point"><span class="highlight">Timeout Handling:</span> Automatic failure on timeout</li>
                            </ul>
                        </div>

                        <div class="code-snippet">
{
  "WaitForApproval": {
    "Type": "Task",
    "Resource": "arn:aws:states:::lambda:invoke.waitForTaskToken",
    "Parameters": {
      "FunctionName": "SendApprovalRequest",
      "Payload": {
        "taskToken.$": "$$.Task.Token",
        "requestData.$": "$",
        "approverEmail.$": "$.approverEmail",
        "requestType": "ORDER_APPROVAL"
      }
    },
    "TimeoutSeconds": 3600,
    "Catch": [
      {
        "ErrorEquals": ["States.Timeout"],
        "Next": "ApprovalTimeout",
        "ResultPath": "$.error"
      },
      {
        "ErrorEquals": ["States.TaskFailed"],
        "Next": "ApprovalRejected",
        "ResultPath": "$.error"
      }
    ],
    "Next": "ProcessApprovedOrder"
  },
  "ApprovalTimeout": {
    "Type": "Task",
    "Resource": "arn:aws:states:::lambda:invoke",
    "Parameters": {
      "FunctionName": "HandleApprovalTimeout",
      "Payload.$": "$"
    },
    "Next": "NotifyTimeout"
  },
  "ApprovalRejected": {
    "Type": "Task",
    "Resource": "arn:aws:states:::lambda:invoke",
    "Parameters": {
      "FunctionName": "HandleRejection",
      "Payload.$": "$"
    },
    "End": true
  }
}
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>Callback Implementation</h4>
                            
                            <div class="code-snippet">
import boto3
import json
import uuid

stepfunctions = boto3.client('stepfunctions')
ses = boto3.client('ses')

def send_approval_request_handler(event, context):
    """Send approval request to external system"""
    
    task_token = event['taskToken']
    request_data = event['requestData']
    approver_email = event['approverEmail']
    
    # Store task token for later callback
    approval_id = str(uuid.uuid4())
    
    # Store in DynamoDB for callback lookup
    store_approval_request(approval_id, task_token, request_data)
    
    # Send email with approval link
    approval_url = f"https://approval-system.com/approve/{approval_id}"
    
    send_approval_email(approver_email, approval_url, request_data)
    
    # Function returns immediately, workflow pauses
    return {
        "status": "approval_sent",
        "approvalId": approval_id,
        "sentTo": approver_email
    }

def approval_callback_handler(event, context):
    """Handle approval response from external system"""
    
    approval_id = event['pathParameters']['approvalId']
    action = event['queryStringParameters']['action']  # 'approve' or 'reject'
    
    # Retrieve task token
    approval_data = get_approval_request(approval_id)
    task_token = approval_data['taskToken']
    
    try:
        if action == 'approve':
            # Resume workflow with success
            stepfunctions.send_task_success(
                taskToken=task_token,
                output=json.dumps({
                    "approved": True,
                    "approvalId": approval_id,
                    "timestamp": datetime.utcnow().isoformat()
                })
            )
            
        elif action == 'reject':
            # Resume workflow with failure
            stepfunctions.send_task_failure(
                taskToken=task_token,
                error='ApprovalRejected',
                cause=f'Request {approval_id} was rejected by approver'
            )
            
        # Clean up approval record
        delete_approval_request(approval_id)
        
        return {
            'statusCode': 200,
            'body': json.dumps({'message': f'Approval {action}ed successfully'})
        }
        
    except Exception as e:
        logger.error(f"Callback failed: {str(e)}")
        return {
            'statusCode': 500,
            'body': json.dumps({'error': 'Callback processing failed'})
        }
                            </div>
                        </div>

                        <div class="best-practice">
                            <h4>Callback Best Practices</h4>
                            <ul>
                                <li class="bullet-point">Implement idempotent callback handlers</li>
                                <li class="bullet-point">Set appropriate timeout values</li>
                                <li class="bullet-point">Store task tokens securely</li>
                                <li class="bullet-point">Handle duplicate callbacks gracefully</li>
                                <li class="bullet-point">Implement cleanup mechanisms</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Lab 6 Callout -->
            <section>
                <div class="lab-callout">
                    <h2>🚀 Lab 6: Workflow Orchestration Using AWS Step Functions</h2>
                    <p>Building complex workflows, implementing callback patterns, and mastering Standard vs Express workflows</p>
                    <div class="lab-duration">Duration: 90 minutes</div>
                </div>
            </section>

            <!-- Break Slide -->
            <section>
                <div class="break-slide">
                    <h2>☕ Break</h2>
                    <p>15 minutes</p>
                    <p style="font-size: 1.0em; margin-top: 20px;">Networking and Discussion</p>
                </div>
            </section>

            <!-- Slide 13: Module 9 Introduction -->
            <section>
                <div class="session-header">Module 9: Observability and Monitoring</div>
                <h2>Three Pillars of Observability</h2>
                <div class="three-column">
                    <div class="feature-item">
                        <h4>Metrics</h4>
                        <p>Quantitative measurements of system performance, health, and business KPIs</p>
                        <ul>
                            <li class="bullet-point">System performance metrics</li>
                            <li class="bullet-point">Business metrics and KPIs</li>
                            <li class="bullet-point">Custom application metrics</li>
                            <li class="bullet-point">Real-time dashboards</li>
                        </ul>
                    </div>
                    <div class="feature-item">
                        <h4>Logs</h4>
                        <p>Detailed records of events and transactions for debugging and analysis</p>
                        <ul>
                            <li class="bullet-point">Structured logging formats</li>
                            <li class="bullet-point">Centralized log aggregation</li>
                            <li class="bullet-point">Log correlation and search</li>
                            <li class="bullet-point">Retention and archival</li>
                        </ul>
                    </div>
                    <div class="feature-item">
                        <h4>Traces</h4>
                        <p>End-to-end request flow visualization across distributed services</p>
                        <ul>
                            <li class="bullet-point">Distributed tracing</li>
                            <li class="bullet-point">Service dependency maps</li>
                            <li class="bullet-point">Performance bottleneck identification</li>
                            <li class="bullet-point">Error propagation analysis</li>
                        </ul>
                    </div>
                </div>
                
                <div class="two-column" style="margin-top: 15px;">
                    <div class="column">
                        <div class="architecture-diagram">
                            <h4>Observability Architecture</h4>
                            <p style="font-family: monospace; font-size: 0.7em;">
                                Application → CloudWatch Logs<br>
                                ↓<br>
                                Lambda → X-Ray Traces<br>
                                ↓<br>
                                Custom Metrics → CloudWatch<br>
                                ↓<br>
                                Dashboards → Alarms → SNS<br>
                                ↓<br>
                                ServiceLens → Correlation
                            </p>
                        </div>
                    </div>
                    <div class="column">
                        <div class="key-concept">
                            <h4>Integration Benefits</h4>
                            <ul>
                                <li class="bullet-point">Complete system visibility and transparency</li>
                                <li class="bullet-point">Faster incident detection and resolution</li>
                                <li class="bullet-point">Proactive performance optimization</li>
                                <li class="bullet-point">Data-driven decision making</li>
                                <li class="bullet-point">Improved user experience monitoring</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 14: CloudWatch Logs and Structured Logging -->
            <section>
                <h2>CloudWatch Logs and Structured Logging</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>Structured Logging Best Practices</h4>
                            
                            <div class="code-snippet">
import json
import logging
import uuid
from datetime import datetime
from typing import Any, Dict, Optional

class StructuredLogger:
    def __init__(self, service_name: str, version: str):
        self.service_name = service_name
        self.version = version
        self.logger = logging.getLogger()
        self.logger.setLevel(logging.INFO)
        
    def _create_log_entry(
        self, 
        level: str, 
        message: str, 
        correlation_id: Optional[str] = None,
        **kwargs
    ) -> Dict[str, Any]:
        
        return {
            "timestamp": datetime.utcnow().isoformat() + "Z",
            "level": level,
            "service": self.service_name,
            "version": self.version,
            "correlation_id": correlation_id or str(uuid.uuid4()),
            "message": message,
            "metadata": kwargs
        }
    
    def info(self, message: str, correlation_id: str = None, **kwargs):
        log_entry = self._create_log_entry("INFO", message, correlation_id, **kwargs)
        self.logger.info(json.dumps(log_entry))
    
    def error(self, message: str, correlation_id: str = None, error: Exception = None, **kwargs):
        if error:
            kwargs.update({
                "error_type": type(error).__name__,
                "error_message": str(error),
                "stack_trace": traceback.format_exc()
            })
        
        log_entry = self._create_log_entry("ERROR", message, correlation_id, **kwargs)
        self.logger.error(json.dumps(log_entry))

# Usage in Lambda function
logger = StructuredLogger("order-service", "1.2.0")

def lambda_handler(event, context):
    correlation_id = event.get('correlationId', context.aws_request_id)
    
    logger.info(
        "Processing order request",
        correlation_id=correlation_id,
        order_id=event.get('orderId'),
        customer_id=event.get('customerId'),
        request_size=len(json.dumps(event))
    )
    
    try:
        start_time = datetime.utcnow()
        result = process_order(event)
        processing_time = (datetime.utcnow() - start_time).total_seconds()
        
        logger.info(
            "Order processed successfully",
            correlation_id=correlation_id,
            order_id=event.get('orderId'),
            processing_time_ms=processing_time * 1000,
            result_status=result.get('status')
        )
        
        return result
        
    except Exception as e:
        logger.error(
            "Order processing failed",
            correlation_id=correlation_id,
            order_id=event.get('orderId'),
            error=e,
            event_data=event
        )
        raise
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>CloudWatch Logs Insights Queries</h4>
                            
                            <div class="code-snippet">
# Find all errors for specific correlation ID
fields @timestamp, level, message, metadata.error_type
| filter correlation_id = "abc-123-def-456"
| filter level = "ERROR"
| sort @timestamp desc

# Performance analysis - slow requests
fields @timestamp, correlation_id, metadata.processing_time_ms
| filter metadata.processing_time_ms > 5000
| stats avg(metadata.processing_time_ms) as avg_time,
        max(metadata.processing_time_ms) as max_time,
        count() as slow_requests by bin(5m)
| sort @timestamp desc

# Error rate calculation by service
fields @timestamp, level, service
| filter @timestamp >= datefloor(@timestamp, 1h)
| stats count() as total_logs,
        sum(level = "ERROR") as error_count by service
| eval error_rate = round((error_count / total_logs) * 100, 2)
| sort error_rate desc

# Top error types
fields @timestamp, metadata.error_type, metadata.error_message
| filter level = "ERROR"
| filter @timestamp >= datefloor(@timestamp, 1d)
| stats count() as error_count by metadata.error_type
| sort error_count desc
| limit 10

# Customer impact analysis
fields @timestamp, correlation_id, metadata.customer_id, level
| filter level = "ERROR"
| filter @timestamp >= datefloor(@timestamp, 1h)
| stats count() as error_count by metadata.customer_id
| sort error_count desc
| limit 20
                            </div>
                        </div>

                        <div class="best-practice">
                            <h4>Log Management Best Practices</h4>
                            <ul>
                                <li class="bullet-point">Use consistent log formats across services</li>
                                <li class="bullet-point">Include correlation IDs for request tracking</li>
                                <li class="bullet-point">Set appropriate log retention periods</li>
                                <li class="bullet-point">Implement log sampling for high-volume systems</li>
                                <li class="bullet-point">Use log groups and streams effectively</li>
                            </ul>
                        </div>

                        <div class="optimization-tip">
                            <h4>Try-it-out Exercise</h4>
                            <p>Implement structured logging in Lambda functions and practice advanced CloudWatch Logs Insights queries for troubleshooting and performance analysis.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 15: AWS X-Ray Distributed Tracing -->
            <section>
                <h2>AWS X-Ray Distributed Tracing Implementation</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>X-Ray Implementation and Configuration</h4>
                            
                            <div class="code-snippet">
from aws_xray_sdk.core import xray_recorder
from aws_xray_sdk.core import patch_all
from aws_xray_sdk.exceptions import SegmentNotFoundException
import boto3
import json

# Automatically trace AWS SDK calls
patch_all()

# Configure X-Ray recorder
xray_recorder.configure(
    context_missing='LOG_ERROR',
    plugins=('EC2Plugin', 'ECSPlugin'),
    daemon_address='127.0.0.1:2000',
    use_ssl=False
)

@xray_recorder.capture('process_order')
def process_order(event):
    """Main order processing function with X-Ray tracing"""
    
    order_id = event.get('orderId')
    customer_id = event.get('customerId')
    
    # Add annotations for filtering and searching
    xray_recorder.put_annotation("orderId", order_id)
    xray_recorder.put_annotation("customerId", customer_id)
    xray_recorder.put_annotation("orderType", event.get('orderType', 'standard'))
    xray_recorder.put_annotation("region", os.environ.get('AWS_REGION'))
    
    # Add metadata for additional context (not indexed)
    xray_recorder.put_metadata("orderDetails", {
        "items": event.get('items', []),
        "totalAmount": event.get('totalAmount'),
        "currency": event.get('currency', 'USD'),
        "shippingAddress": event.get('shippingAddress')
    })
    
    try:
        # Validate order with subsegment
        with xray_recorder.in_subsegment('validate_order') as subsegment:
            validation_result = validate_order_data(event)
            subsegment.put_annotation("validationResult", validation_result['status'])
            
            if not validation_result['valid']:
                subsegment.add_exception(
                    ValueError(f"Invalid order: {validation_result['errors']}")
                )
                raise ValueError("Order validation failed")
        
        # Process payment
        with xray_recorder.in_subsegment('process_payment') as subsegment:
            payment_result = process_payment(event)
            subsegment.put_annotation("paymentStatus", payment_result['status'])
            subsegment.put_annotation("paymentMethod", payment_result['method'])
            
        # Update inventory
        with xray_recorder.in_subsegment('update_inventory') as subsegment:
            inventory_result = update_inventory(event['items'])
            subsegment.put_annotation("inventoryUpdated", len(event['items']))
            
        # Send notifications
        with xray_recorder.in_subsegment('send_notifications') as subsegment:
            notification_result = send_order_notifications(event)
            subsegment.put_annotation("notificationsSent", len(notification_result))
        
        return {
            "status": "completed",
            "orderId": order_id,
            "paymentId": payment_result['paymentId']
        }
        
    except Exception as e:
        # Add exception to current segment
        xray_recorder.current_segment().add_exception(e)
        raise

def validate_order_data(order_data):
    """Validate order data with detailed tracing"""
    
    # Simulate validation logic
    errors = []
    
    if not order_data.get('customerId'):
        errors.append("Missing customer ID")
    
    if not order_data.get('items'):
        errors.append("No items in order")
    
    # Add custom metric for validation time
    start_time = time.time()
    # ... validation logic ...
    validation_time = time.time() - start_time
    
    xray_recorder.current_subsegment().put_metadata("validationMetrics", {
        "validationTimeMs": validation_time * 1000,
        "itemCount": len(order_data.get('items', [])),
        "errorCount": len(errors)
    })
    
    return {
        "valid": len(errors) == 0,
        "errors": errors,
        "status": "valid" if len(errors) == 0 else "invalid"
    }
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>X-Ray Service Map Analysis</h4>
                            <ul>
                                <li class="bullet-point"><span class="highlight">Service Dependencies:</span> Visual representation of service interactions</li>
                                <li class="bullet-point"><span class="highlight">Performance Metrics:</span> Response times, throughput, and error rates</li>
                                <li class="bullet-point"><span class="highlight">Error Analysis:</span> Error propagation and fault isolation</li>
                                <li class="bullet-point"><span class="highlight">Bottleneck Identification:</span> Slow services and operations</li>
                            </ul>
                        </div>

                        <div class="sub-section">
                            <h4>Advanced X-Ray Features</h4>
                            
                            <div class="workflow-step">
                                <strong>Sampling Rules</strong>
                                <ul>
                                    <li class="bullet-point">Cost-effective trace collection</li>
                                    <li class="bullet-point">Custom sampling rates by service</li>
                                    <li class="bullet-point">Burst sampling for errors</li>
                                    <li class="bullet-point">Dynamic rule adjustment</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Annotations vs Metadata</strong>
                                <ul>
                                    <li class="bullet-point">Annotations: Indexed, searchable, limited size</li>
                                    <li class="bullet-point">Metadata: Not indexed, larger size, detailed context</li>
                                    <li class="bullet-point">Strategic use for performance optimization</li>
                                    <li class="bullet-point">Cost implications and best practices</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Integration Patterns</strong>
                                <ul>
                                    <li class="bullet-point">API Gateway automatic tracing</li>
                                    <li class="bullet-point">Lambda layer integration</li>
                                    <li class="bullet-point">Container and ECS integration</li>
                                    <li class="bullet-point">Third-party service tracing</li>
                                </ul>
                            </div>
                        </div>

                        <div class="optimization-tip">
                            <h4>Try-it-out Exercise</h4>
                            <p>Enable X-Ray tracing across multiple services, implement custom annotations and metadata, and analyze traces to identify performance bottlenecks and error patterns.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 16: CloudWatch Metrics and Embedded Metrics -->
            <section>
                <h2>CloudWatch Metrics and Embedded Metrics Format</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>Embedded Metrics Format (EMF) Implementation</h4>
                            
                            <div class="code-snippet">
import json
import time
from datetime import datetime
from typing import Dict, List, Any

class CloudWatchMetrics:
    def __init__(self, namespace: str):
        self.namespace = namespace
        self.metrics = []
        self.dimensions = {}
        self.properties = {}
        
    def add_dimension(self, name: str, value: str):
        """Add dimension for metric aggregation"""
        self.dimensions[name] = value
        return self
        
    def add_property(self, name: str, value: Any):
        """Add property for additional context"""
        self.properties[name] = value
        return self
        
    def add_metric(self, name: str, value: float, unit: str = "Count"):
        """Add metric to be published"""
        self.metrics.append({
            "Name": name,
            "Value": value,
            "Unit": unit
        })
        return self
    
    def publish(self):
        """Publish metrics using EMF"""
        
        emf_log = {
            "_aws": {
                "Timestamp": int(time.time() * 1000),
                "CloudWatchMetrics": [{
                    "Namespace": self.namespace,
                    "Dimensions": [list(self.dimensions.keys())],
                    "Metrics": self.metrics
                }]
            }
        }
        
        # Add dimensions as top-level properties
        emf_log.update(self.dimensions)
        
        # Add additional properties
        emf_log.update(self.properties)
        
        # Print to stdout (CloudWatch Logs will parse this)
        print(json.dumps(emf_log))

def publish_business_metrics(order_data: Dict, processing_time: float, result: Dict):
    """Publish comprehensive business and technical metrics"""
    
    metrics = CloudWatchMetrics("OrderProcessing/Production")
    
    # Add dimensions for aggregation
    metrics.add_dimension("Environment", os.environ.get("ENVIRONMENT", "prod"))
    metrics.add_dimension("CustomerType", order_data.get("customerType", "standard"))
    metrics.add_dimension("Region", os.environ.get("AWS_REGION", "us-east-1"))
    metrics.add_dimension("OrderType", order_data.get("orderType", "online"))
    
    # Add business metrics
    metrics.add_metric("OrderCount", 1, "Count")
    metrics.add_metric("OrderValue", order_data.get("totalAmount", 0), "None")
    metrics.add_metric("ProcessingTime", processing_time * 1000, "Milliseconds")
    metrics.add_metric("ItemCount", len(order_data.get("items", [])), "Count")
    
    # Add technical metrics
    if result.get("status") == "completed":
        metrics.add_metric("SuccessfulOrders", 1, "Count")
    else:
        metrics.add_metric("FailedOrders", 1, "Count")
    
    # Add properties for additional context
    metrics.add_property("orderId", order_data.get("orderId"))
    metrics.add_property("customerId", order_data.get("customerId"))
    metrics.add_property("paymentMethod", order_data.get("paymentMethod"))
    metrics.add_property("functionVersion", context.function_version)
    
    # Publish all metrics
    metrics.publish()

def lambda_handler(event, context):
    start_time = time.time()
    
    try:
        # Process order
        result = process_order(event)
        processing_time = time.time() - start_time
        
        # Publish success metrics
        publish_business_metrics(event, processing_time, result)
        
        return {
            "statusCode": 200,
            "body": json.dumps(result)
        }
        
    except Exception as e:
        processing_time = time.time() - start_time
        
        # Publish failure metrics
        failure_result = {"status": "failed", "error": str(e)}
        publish_business_metrics(event, processing_time, failure_result)
        
        # Publish error-specific metrics
        error_metrics = CloudWatchMetrics("OrderProcessing/Errors")
        error_metrics.add_dimension("ErrorType", type(e).__name__)
        error_metrics.add_dimension("Environment", os.environ.get("ENVIRONMENT", "prod"))
        error_metrics.add_metric("ErrorCount", 1, "Count")
        error_metrics.add_property("errorMessage", str(e))
        error_metrics.publish()
        
        raise
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>CloudWatch Alarms and Dashboards</h4>
                            
                            <div class="code-snippet">
# CloudFormation template for comprehensive monitoring
Resources:
  HighErrorRateAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      AlarmName: OrderProcessing-HighErrorRate
      AlarmDescription: Error rate exceeds 5% threshold
      MetricName: FailedOrders
      Namespace: OrderProcessing/Production
      Statistic: Sum
      Period: 300
      EvaluationPeriods: 2
      Threshold: 5
      ComparisonOperator: GreaterThanThreshold
      Dimensions:
        - Name: Environment
          Value: prod
      AlarmActions:
        - !Ref AlertsTopic
      TreatMissingData: notBreaching

  SlowProcessingAlarm:
    Type: AWS::CloudWatch::Alarm
    Properties:
      AlarmName: OrderProcessing-SlowProcessing
      MetricName: ProcessingTime
      Namespace: OrderProcessing/Production
      Statistic: Average
      Period: 300
      EvaluationPeriods: 3
      Threshold: 5000  # 5 seconds
      ComparisonOperator: GreaterThanThreshold
      
  BusinessMetricsDashboard:
    Type: AWS::CloudWatch::Dashboard
    Properties:
      DashboardName: OrderProcessing-Business-Metrics
      DashboardBody: !Sub |
        {
          "widgets": [
            {
              "type": "metric",
              "properties": {
                "metrics": [
                  ["OrderProcessing/Production", "OrderCount", "Environment", "prod"],
                  [".", "OrderValue", ".", "."],
                  [".", "SuccessfulOrders", ".", "."],
                  [".", "FailedOrders", ".", "."]
                ],
                "period": 300,
                "stat": "Sum",
                "region": "${AWS::Region}",
                "title": "Order Processing Metrics"
              }
            },
            {
              "type": "metric",
              "properties": {
                "metrics": [
                  ["OrderProcessing/Production", "ProcessingTime", "Environment", "prod"]
                ],
                "period": 300,
                "stat": "Average",
                "region": "${AWS::Region}",
                "title": "Processing Performance"
              }
            }
          ]
        }
                            </div>
                        </div>

                        <div class="metrics-box">
                            <h4>Key Performance Indicators (KPIs)</h4>
                            <ul>
                                <li class="bullet-point"><span class="highlight">Business Metrics:</span> Order volume, revenue, conversion rates</li>
                                <li class="bullet-point"><span class="highlight">Technical Metrics:</span> Response time, error rate, throughput</li>
                                <li class="bullet-point"><span class="highlight">Operational Metrics:</span> Resource utilization, cost per transaction</li>
                                <li class="bullet-point"><span class="highlight">User Experience:</span> Page load time, API response time</li>
                            </ul>
                        </div>

                        <div class="best-practice">
                            <h4>Monitoring Strategy</h4>
                            <ul>
                                <li class="bullet-point">Implement SLI/SLO-based alerting</li>
                                <li class="bullet-point">Create operational runbooks</li>
                                <li class="bullet-point">Set up automated incident response</li>
                                <li class="bullet-point">Regular review and optimization</li>
                            </ul>
                        </div>

                        <div class="optimization-tip">
                            <h4>Try-it-out Exercise</h4>
                            <p>Create comprehensive CloudWatch metrics using EMF, set up alarms and dashboards, and explore ServiceLens for end-to-end monitoring.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Lab 7 Callout -->
            <section>
                <div class="lab-callout">
                    <h2>🚀 Lab 7: Observability and Monitoring Implementation</h2>
                    <p>Setting up comprehensive monitoring with CloudWatch, X-Ray, structured logging, and custom metrics</p>
                    <div class="lab-duration">Duration: 90 minutes</div>
                </div>
            </section>

            <!-- Lunch Break -->
            <section>
                <div class="break-slide">
                    <h2>🍽️ Lunch Break</h2>
                    <p>60 minutes</p>
                    <p style="font-size: 1.0em; margin-top: 20px;">Enjoy your meal and networking</p>
                </div>
            </section>

            <!-- Slide 17: Module 10 Introduction -->
            <section>
                <div class="session-header">Module 10: Serverless Application Security</div>
                <h2>Multi-Layer Security Architecture</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>Defense in Depth Strategy</h4>
                            <ul>
                                <li class="bullet-point"><span class="highlight">Edge Security:</span> CloudFront, WAF, Shield protection</li>
                                <li class="bullet-point"><span class="highlight">API Gateway Security:</span> Authentication, authorization, throttling</li>
                                <li class="bullet-point"><span class="highlight">Lambda Security:</span> Execution roles, environment encryption</li>
                                <li class="bullet-point"><span class="highlight">Data Layer Security:</span> Encryption, access controls</li>
                                <li class="bullet-point"><span class="highlight">Network Security:</span> VPC, private subnets, endpoints</li>
                                <li class="bullet-point"><span class="highlight">Monitoring Security:</span> CloudTrail, GuardDuty, Security Hub</li>
                            </ul>
                        </div>

                        <div class="architecture-diagram">
                            <h4>Security Architecture Layers</h4>
                            <p style="font-family: monospace; font-size: 0.65em;">
                                Internet → CloudFront + WAF<br>
                                ↓<br>
                                API Gateway + Cognito<br>
                                ↓<br>
                                Lambda (VPC) + IAM Roles<br>
                                ↓<br>
                                DynamoDB + KMS Encryption<br>
                                ↓<br>
                                CloudTrail + GuardDuty + Security Hub<br>
                                ↓<br>
                                Automated Response + Alerts
                            </p>
                        </div>

                        <div class="security-highlight">
                            <h4>Security Principles</h4>
                            <ul>
                                <li class="bullet-point">Principle of least privilege</li>
                                <li class="bullet-point">Zero trust architecture</li>
                                <li class="bullet-point">Encryption everywhere</li>
                                <li class="bullet-point">Continuous monitoring</li>
                                <li class="bullet-point">Automated remediation</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>API Gateway Security Controls</h4>
                            
                            <div class="workflow-step">
                                <strong>Authentication Methods</strong>
                                <ul>
                                    <li class="bullet-point">Cognito User Pools integration</li>
                                    <li class="bullet-point">JWT token validation and verification</li>
                                    <li class="bullet-point">API key management and rotation</li>
                                    <li class="bullet-point">IAM authentication for AWS services</li>
                                    <li class="bullet-point">Custom authorizer functions</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Authorization Patterns</strong>
                                <ul>
                                    <li class="bullet-point">Resource-based policies</li>
                                    <li class="bullet-point">Scope-based access control</li>
                                    <li class="bullet-point">Role-based permissions</li>
                                    <li class="bullet-point">Attribute-based access control (ABAC)</li>
                                    <li class="bullet-point">Dynamic policy evaluation</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Protection Mechanisms</strong>
                                <ul>
                                    <li class="bullet-point">Request throttling and rate limiting</li>
                                    <li class="bullet-point">Usage plans and quotas</li>
                                    <li class="bullet-point">WAF integration for DDoS protection</li>
                                    <li class="bullet-point">Request/response validation</li>
                                    <li class="bullet-point">CORS policy enforcement</li>
                                </ul>
                            </div>
                        </div>

                        <div class="security-highlight">
                            <h4>Security Best Practices</h4>
                            <ul>
                                <li class="bullet-point">Regular security assessments and penetration testing</li>
                                <li class="bullet-point">Automated vulnerability scanning</li>
                                <li class="bullet-point">Security configuration compliance</li>
                                <li class="bullet-point">Incident response planning</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 18: Lambda Security Implementation -->
            <section>
                <h2>Lambda Security and IAM Best Practices</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>IAM Role Design Patterns</h4>
                            
                            <div class="code-snippet">
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "DynamoDBAccess",
      "Effect": "Allow",
      "Action": [
        "dynamodb:GetItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:Query"
      ],
      "Resource": [
        "arn:aws:dynamodb:*:*:table/UserData",
        "arn:aws:dynamodb:*:*:table/UserData/index/*"
      ],
      "Condition": {
        "ForAllValues:StringEquals": {
          "dynamodb:Attributes": [
            "userId",
            "userData", 
            "timestamp",
            "status"
          ]
        },
        "StringEquals": {
          "dynamodb:LeadingKeys": ["${aws:userid}"]
        }
      }
    },
    {
      "Sid": "KMSDecryption",
      "Effect": "Allow",
      "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
      ],
      "Resource": "arn:aws:kms:*:*:key/12345678-1234-1234-1234-123456789012",
      "Condition": {
        "StringEquals": {
          "kms:ViaService": [
            "dynamodb.us-east-1.amazonaws.com",
            "s3.us-east-1.amazonaws.com"
          ]
        },
        "StringLike": {
          "kms:EncryptionContext:aws:dynamodb:table-name": "UserData*"
        }
      }
    },
    {
      "Sid": "LoggingPermissions",
      "Effect": "Allow",
      "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
      ],
      "Resource": "arn:aws:logs:*:*:log-group:/aws/lambda/user-*"
    },
    {
      "Sid": "VPCAccess",
      "Effect": "Allow",
      "Action": [
        "ec2:CreateNetworkInterface",
        "ec2:DescribeNetworkInterfaces",
        "ec2:DeleteNetworkInterface",
        "ec2:AttachNetworkInterface",
        "ec2:DetachNetworkInterface"
      ],
      "Resource": "*",
      "Condition": {
        "StringEquals": {
          "ec2:Subnet": [
            "arn:aws:ec2:*:*:subnet/subnet-12345678",
            "arn:aws:ec2:*:*:subnet/subnet-87654321"
          ]
        }
      }
    }
  ]
}
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>Environment Variable Security</h4>
                            
                            <div class="code-snippet">
import boto3
import os
import base64
import json
from typing import Dict, Any

class SecureConfig:
    def __init__(self):
        self.kms = boto3.client('kms')
        self.ssm = boto3.client('ssm')
        self.secrets = boto3.client('secretsmanager')
        self._cache = {}
    
    def get_encrypted_env_var(self, var_name: str) -> str:
        """Decrypt KMS-encrypted environment variable"""
        
        if var_name in self._cache:
            return self._cache[var_name]
            
        encrypted_value = os.environ.get(var_name)
        if not encrypted_value:
            raise ValueError(f"Environment variable {var_name} not found")
        
        try:
            # Decode base64 and decrypt
            encrypted_bytes = base64.b64decode(encrypted_value)
            
            response = self.kms.decrypt(
                CiphertextBlob=encrypted_bytes,
                EncryptionContext={
                    'LambdaFunctionName': os.environ.get('AWS_LAMBDA_FUNCTION_NAME'),
                    'Environment': os.environ.get('ENVIRONMENT', 'prod')
                }
            )
            
            decrypted_value = response['Plaintext'].decode('utf-8')
            self._cache[var_name] = decrypted_value
            return decrypted_value
            
        except Exception as e:
            logger.error(f"Failed to decrypt {var_name}: {str(e)}")
            raise
    
    def get_parameter_store_value(self, parameter_name: str, decrypt: bool = True) -> str:
        """Retrieve value from Systems Manager Parameter Store"""
        
        cache_key = f"ssm:{parameter_name}"
        if cache_key in self._cache:
            return self._cache[cache_key]
        
        try:
            response = self.ssm.get_parameter(
                Name=parameter_name,
                WithDecryption=decrypt
            )
            
            value = response['Parameter']['Value']
            self._cache[cache_key] = value
            return value
            
        except Exception as e:
            logger.error(f"Failed to retrieve parameter {parameter_name}: {str(e)}")
            raise
    
    def get_secret(self, secret_name: str) -> Dict[str, Any]:
        """Retrieve secret from AWS Secrets Manager"""
        
        cache_key = f"secret:{secret_name}"
        if cache_key in self._cache:
            return self._cache[cache_key]
        
        try:
            response = self.secrets.get_secret_value(SecretId=secret_name)
            secret_data = json.loads(response['SecretString'])
            self._cache[cache_key] = secret_data
            return secret_data
            
        except Exception as e:
            logger.error(f"Failed to retrieve secret {secret_name}: {str(e)}")
            raise

# Usage in Lambda function
config = SecureConfig()

def lambda_handler(event, context):
    try:
        # Retrieve secure configuration
        db_password = config.get_encrypted_env_var('DB_PASSWORD_ENCRYPTED')
        api_key = config.get_parameter_store_value('/app/external-api/key')
        db_credentials = config.get_secret('prod/database/credentials')
        
        # Use secure configuration
        connection = create_secure_connection(
            host=db_credentials['host'],
            username=db_credentials['username'],
            password=db_credentials['password']
        )
        
        return process_request(event, connection, api_key)
        
    except Exception as e:
        logger.error(f"Configuration error: {str(e)}")
        raise
                            </div>
                        </div>

                        <div class="security-highlight">
                            <h4>Lambda Security Checklist</h4>
                            <ul>
                                <li class="bullet-point">Minimize execution role permissions</li>
                                <li class="bullet-point">Encrypt environment variables</li>
                                <li class="bullet-point">Use VPC for database connections</li>
                                <li class="bullet-point">Enable code signing</li>
                                <li class="bullet-point">Regular security scanning</li>
                                <li class="bullet-point">Implement input validation</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 19: Data Protection and Encryption -->
            <section>
                <h2>Data Protection and Encryption Strategies</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>DynamoDB Security Configuration</h4>
                            
                            <div class="code-snippet">
# CloudFormation template for secure DynamoDB
Resources:
  UserDataTable:
    Type: AWS::DynamoDB::Table
    Properties:
      TableName: !Sub "${Environment}-UserData"
      AttributeDefinitions:
        - AttributeName: userId
          AttributeType: S
        - AttributeName: dataType
          AttributeType: S
      KeySchema:
        - AttributeName: userId
          KeyType: HASH
        - AttributeName: dataType
          KeyType: RANGE
      
      # Encryption at rest
      SSESpecification:
        SSEEnabled: true
        KMSMasterKeyId: !Ref UserDataKMSKey
        
      # Point-in-time recovery
      PointInTimeRecoverySpecification:
        PointInTimeRecoveryEnabled: true
        
      # Backup configuration
      BackupPolicy:
        PointInTimeRecoveryEnabled: true
        
      # Stream configuration with encryption
      StreamSpecification:
        StreamViewType: NEW_AND_OLD_IMAGES
        
      # VPC Endpoint access only
      VpcConfiguration:
        VpcId: !Ref VPC
        SubnetIds:
          - !Ref PrivateSubnet1
          - !Ref PrivateSubnet2
          
  UserDataKMSKey:
    Type: AWS::KMS::Key
    Properties:
      Description: "KMS key for UserData table encryption"
      KeyPolicy:
        Statement:
          - Sid: Enable IAM User Permissions
            Effect: Allow
            Principal:
              AWS: !Sub "arn:aws:iam::${AWS::AccountId}:root"
            Action: "kms:*"
            Resource: "*"
          - Sid: Allow DynamoDB Service
            Effect: Allow
            Principal:
              Service: dynamodb.amazonaws.com
            Action:
              - kms:Decrypt
              - kms:DescribeKey
              - kms:Encrypt
              - kms:GenerateDataKey*
              - kms:ReEncrypt*
            Resource: "*"
          - Sid: Allow Lambda Functions
            Effect: Allow
            Principal:
              AWS: !GetAtt LambdaExecutionRole.Arn
            Action:
              - kms:Decrypt
              - kms:DescribeKey
            Resource: "*"
            Condition:
              StringEquals:
                "kms:ViaService": !Sub "dynamodb.${AWS::Region}.amazonaws.com"
                
  # Resource-based policy for fine-grained access
  UserDataTablePolicy:
    Type: AWS::IAM::Policy
    Properties:
      PolicyName: UserDataTableAccess
      PolicyDocument:
        Statement:
          - Effect: Allow
            Action:
              - dynamodb:GetItem
              - dynamodb:PutItem
              - dynamodb:UpdateItem
              - dynamodb:DeleteItem
            Resource: !GetAtt UserDataTable.Arn
            Condition:
              ForAllValues:StringEquals:
                "dynamodb:LeadingKeys": ["${cognito-identity.amazonaws.com:sub}"]
              ForAllValues:StringLike:
                "dynamodb:Attributes": 
                  - "userId"
                  - "userData"
                  - "timestamp"
                  - "permissions"
      Roles:
        - !Ref LambdaExecutionRole
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>S3 Security and Access Control</h4>
                            
                            <div class="code-snippet">
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "DenyInsecureConnections",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:*",
      "Resource": [
        "arn:aws:s3:::secure-user-data-bucket",
        "arn:aws:s3:::secure-user-data-bucket/*"
      ],
      "Condition": {
        "Bool": {
          "aws:SecureTransport": "false"
        }
      }
    },
    {
      "Sid": "EnforceSSEKMS",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::secure-user-data-bucket/*",
      "Condition": {
        "StringNotEquals": {
          "s3:x-amz-server-side-encryption": "aws:kms"
        }
      }
    },
    {
      "Sid": "AllowLambdaAccess",
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::ACCOUNT-ID:role/user-data-lambda-role"
      },
      "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject"
      ],
      "Resource": "arn:aws:s3:::secure-user-data-bucket/user-files/*",
      "Condition": {
        "StringEquals": {
          "s3:x-amz-server-side-encryption": "aws:kms",
          "s3:x-amz-server-side-encryption-aws-kms-key-id": "arn:aws:kms:region:account:key/key-id"
        },
        "StringLike": {
          "s3:prefix": ["${aws:userid}/*"]
        }
      }
    },
    {
      "Sid": "DenyPublicAccess",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:*",
      "Resource": [
        "arn:aws:s3:::secure-user-data-bucket",
        "arn:aws:s3:::secure-user-data-bucket/*"
      ],
      "Condition": {
        "StringEquals": {
          "aws:PrincipalServiceName": "s3.amazonaws.com"
        }
      }
    }
  ]
}
                            </div>
                        </div>

                        <div class="sub-section">
                            <h4>Data Classification and Handling</h4>
                            
                            <div class="workflow-step">
                                <strong>Data Classification Levels</strong>
                                <ul>
                                    <li class="bullet-point">Public: No encryption required</li>
                                    <li class="bullet-point">Internal: Standard encryption (AES-256)</li>
                                    <li class="bullet-point">Confidential: Customer-managed keys</li>
                                    <li class="bullet-point">Restricted: Enhanced controls + audit</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Encryption Strategies</strong>
                                <ul>
                                    <li class="bullet-point">Encryption in transit (TLS 1.2+)</li>
                                    <li class="bullet-point">Encryption at rest (KMS integration)</li>
                                    <li class="bullet-point">Client-side encryption for sensitive data</li>
                                    <li class="bullet-point">Key rotation and lifecycle management</li>
                                </ul>
                            </div>
                        </div>

                        <div class="security-highlight">
                            <h4>Compliance Considerations</h4>
                            <ul>
                                <li class="bullet-point">GDPR data protection requirements</li>
                                <li class="bullet-point">PCI DSS for payment data</li>
                                <li class="bullet-point">HIPAA for healthcare information</li>
                                <li class="bullet-point">SOX for financial data</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 20: Auditing and Compliance Automation -->
            <section>
                <h2>Auditing, Compliance, and Automated Response</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>CloudTrail Integration and Event Processing</h4>
                            
                            <div class="code-snippet">
import json
import boto3
from datetime import datetime, timedelta
from typing import Dict, List, Any

class SecurityEventProcessor:
    def __init__(self):
        self.sns = boto3.client('sns')
        self.dynamodb = boto3.resource('dynamodb')
        self.security_table = self.dynamodb.Table('SecurityEvents')
        self.iam = boto3.client('iam')
        
    def process_cloudtrail_event(self, event: Dict) -> Dict:
        """Process CloudTrail event for security analysis"""
        
        event_name = event.get('eventName')
        source_ip = event.get('sourceIPAddress')
        user_identity = event.get('userIdentity', {})
        aws_region = event.get('awsRegion')
        event_time = event.get('eventTime')
        
        # Analyze for suspicious activities
        risk_score = self.calculate_risk_score(event)
        
        security_event = {
            'eventId': event.get('eventID'),
            'timestamp': event_time,
            'eventName': event_name,
            'sourceIP': source_ip,
            'userType': user_identity.get('type'),
            'userName': user_identity.get('userName', 'unknown'),
            'awsRegion': aws_region,
            'riskScore': risk_score,
            'processed': datetime.utcnow().isoformat()
        }
        
        # Store for analysis
        self.store_security_event(security_event)
        
        # Check for high-risk events
        if risk_score >= 8:
            self.handle_high_risk_event(security_event, event)
        elif risk_score >= 5:
            self.handle_medium_risk_event(security_event, event)
            
        return security_event
    
    def calculate_risk_score(self, event: Dict) -> int:
        """Calculate risk score based on event characteristics"""
        
        score = 0
        event_name = event.get('eventName', '')
        source_ip = event.get('sourceIPAddress', '')
        user_identity = event.get('userIdentity', {})
        
        # High-risk events
        high_risk_events = [
            'CreateUser', 'DeleteUser', 'AttachUserPolicy',
            'CreateRole', 'DeleteRole', 'AssumeRole',
            'CreateBucket', 'DeleteBucket', 'PutBucketPolicy',
            'CreateKey', 'DeleteKey', 'ScheduleKeyDeletion'
        ]
        
        if event_name in high_risk_events:
            score += 5
            
        # Suspicious IP addresses
        if self.is_suspicious_ip(source_ip):
            score += 3
            
        # Root user activities
        if user_identity.get('type') == 'Root':
            score += 4
            
        # Failed events
        if event.get('errorCode'):
            score += 2
            
        # Console login from unusual location
        if event_name == 'ConsoleLogin' and not self.is_known_location(source_ip):
            score += 3
            
        return min(score, 10)
    
    def handle_high_risk_event(self, security_event: Dict, raw_event: Dict):
        """Handle high-risk security events"""
        
        # Immediate alert
        self.send_security_alert(
            severity='HIGH',
            event=security_event,
            message=f"High-risk security event detected: {security_event['eventName']}"
        )
        
        # Automated response for specific events
        if security_event['eventName'] in ['CreateUser', 'AttachUserPolicy']:
            self.quarantine_user(security_event['userName'])
            
        if 'CreateBucket' in security_event['eventName']:
            self.audit_bucket_permissions(raw_event)
    
    def send_security_alert(self, severity: str, event: Dict, message: str):
        """Send security alert via SNS"""
        
        alert_payload = {
            'severity': severity,
            'timestamp': datetime.utcnow().isoformat(),
            'event': event,
            'message': message,
            'region': os.environ.get('AWS_REGION'),
            'account': event.get('recipientAccountId')
        }
        
        self.sns.publish(
            TopicArn=os.environ['SECURITY_ALERTS_TOPIC'],
            Subject=f"[{severity}] Security Alert - {event['eventName']}",
            Message=json.dumps(alert_payload, indent=2)
        )

def lambda_handler(event, context):
    """CloudTrail event processing Lambda function"""
    
    processor = SecurityEventProcessor()
    
    # Process S3 event containing CloudTrail logs
    for record in event.get('Records', []):
        try:
            bucket = record['s3']['bucket']['name']
            key = record['s3']['object']['key']
            
            # Download and process CloudTrail log file
            cloudtrail_events = download_and_parse_logs(bucket, key)
            
            for ct_event in cloudtrail_events:
                security_event = processor.process_cloudtrail_event(ct_event)
                
            logger.info(f"Processed {len(cloudtrail_events)} CloudTrail events")
            
        except Exception as e:
            logger.error(f"Failed to process CloudTrail event: {str(e)}")
            raise
    
    return {
        'statusCode': 200,
        'processedRecords': len(event.get('Records', []))
    }
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>Compliance Monitoring and Reporting</h4>
                            
                            <div class="architecture-diagram">
                                <h4>Security Event Flow</h4>
                                <p style="font-family: monospace; font-size: 0.65em;">
                                    CloudTrail → S3 → Lambda Processor<br>
                                    ↓<br>
                                    Risk Analysis → DynamoDB<br>
                                    ↓<br>
                                    High Risk → Immediate Alert<br>
                                    ↓<br>
                                    EventBridge → Security Automation<br>
                                    ↓<br>
                                    Response Actions → Audit Log
                                </p>
                            </div>

                            <div class="workflow-step">
                                <strong>Automated Compliance Checks</strong>
                                <ul>
                                    <li class="bullet-point">Resource configuration compliance</li>
                                    <li class="bullet-point">Access pattern analysis</li>
                                    <li class="bullet-point">Encryption status verification</li>
                                    <li class="bullet-point">Policy drift detection</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Incident Response Automation</strong>
                                <ul>
                                    <li class="bullet-point">Automatic user quarantine</li>
                                    <li class="bullet-point">Resource isolation</li>
                                    <li class="bullet-point">Ticket creation in ITSM</li>
                                    <li class="bullet-point">Forensic data collection</li>
                                </ul>
                            </div>

                            <div class="workflow-step">
                                <strong>Security Metrics and KPIs</strong>
                                <ul>
                                    <li class="bullet-point">Failed authentication attempts</li>
                                    <li class="bullet-point">Unusual API call patterns</li>
                                    <li class="bullet-point">Policy violations</li>
                                    <li class="bullet-point">Configuration drift incidents</li>
                                </ul>
                            </div>
                        </div>

                        <div class="security-highlight">
                            <h4>Compliance Frameworks</h4>
                            <ul>
                                <li class="bullet-point">AWS Config rules for continuous monitoring</li>
                                <li class="bullet-point">Security Hub findings aggregation</li>
                                <li class="bullet-point">GuardDuty threat detection</li>
                                <li class="bullet-point">AWS Well-Architected reviews</li>
                            </ul>
                        </div>

                        <div class="best-practice">
                            <h4>Reporting and Documentation</h4>
                            <ul>
                                <li class="bullet-point">Automated compliance reports</li>
                                <li class="bullet-point">Security posture dashboards</li>
                                <li class="bullet-point">Incident response playbooks</li>
                                <li class="bullet-point">Regular security assessments</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Lab 8 Callout -->
            <section>
                <div class="lab-callout">
                    <h2>🚀 Lab 8: Securing Serverless Applications</h2>
                    <p>Implementing comprehensive security controls, compliance measures, and automated incident response</p>
                    <div class="lab-duration">Duration: 90 minutes</div>
                </div>
            </section>

            <!-- Slide 21: Day 2 Comprehensive Takeaways -->
            <section>
                <h2>Day 2 Comprehensive Takeaways</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>Lambda Function Excellence</h4>
                            <ul>
                                <li class="bullet-point">Advanced performance optimization and cold start mitigation</li>
                                <li class="bullet-point">Sophisticated error handling and resilience patterns</li>
                                <li class="bullet-point">Production-ready deployment strategies</li>
                                <li class="bullet-point">Cost optimization and resource management</li>
                                <li class="bullet-point">Version control and alias management</li>
                            </ul>
                        </div>

                        <div class="sub-section">
                            <h4>Workflow Orchestration Mastery</h4>
                            <ul>
                                <li class="bullet-point">Complex business process automation with Step Functions</li>
                                <li class="bullet-point">Standard vs Express workflow optimization</li>
                                <li class="bullet-point">Direct service integrations for performance</li>
                                <li class="bullet-point">Callback pattern implementation for external systems</li>
                                <li class="bullet-point">Error handling and retry strategies</li>
                            </ul>
                        </div>

                        <div class="metrics-box">
                            <h4>Technical Achievements</h4>
                            <ul>
                                <li class="bullet-point">4 advanced hands-on labs completed</li>
                                <li class="bullet-point">Production-ready patterns implemented</li>
                                <li class="bullet-point">End-to-end monitoring solutions</li>
                                <li class="bullet-point">Enterprise security controls</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>Observability and Monitoring Excellence</h4>
                            <ul>
                                <li class="bullet-point">Three pillars implementation with advanced correlation</li>
                                <li class="bullet-point">Structured logging and CloudWatch Logs Insights mastery</li>
                                <li class="bullet-point">Distributed tracing with X-Ray for complex systems</li>
                                <li class="bullet-point">Custom metrics and embedded metrics format</li>
                                <li class="bullet-point">Proactive alerting and incident response</li>
                            </ul>
                        </div>

                        <div class="sub-section">
                            <h4>Security Architecture Implementation</h4>
                            <ul>
                                <li class="bullet-point">Multi-layer defense-in-depth strategies</li>
                                <li class="bullet-point">Advanced IAM policies and least privilege</li>
                                <li class="bullet-point">Comprehensive data protection and encryption</li>
                                <li class="bullet-point">Automated compliance monitoring</li>
                                <li class="bullet-point">Incident response automation</li>
                            </ul>
                        </div>

                        <div class="key-concept">
                            <h4>Enterprise Readiness</h4>
                            <p>Day 2 has equipped you with advanced skills to build, monitor, secure, and operate production-grade serverless applications at enterprise scale with reliability, security, and operational excellence.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 22: Day 3 Preview and Preparation -->
            <section>
                <h2>Day 3 Preview: Production Deployment and Integration</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>Tomorrow's Advanced Topics</h4>
                            
                            <div class="feature-item">
                                <h4>Performance and Scaling Mastery</h4>
                                <p>High-scale production scenarios, advanced concurrency management, cost optimization, and performance tuning methodologies</p>
                            </div>
                            
                            <div class="feature-item">
                                <h4>CI/CD Pipeline Automation</h4>
                                <p>Comprehensive automated deployment workflows using AWS developer tools, testing strategies, and deployment best practices</p>
                            </div>
                            
                            <div class="feature-item">
                                <h4>Advanced Security Patterns</h4>
                                <p>Enterprise security implementation, compliance automation, threat detection, and security operations center integration</p>
                            </div>
                            
                            <div class="feature-item">
                                <h4>End-to-End Integration Project</h4>
                                <p>Comprehensive serverless solution development combining all course concepts in a real-world enterprise scenario</p>
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>Preparation Activities</h4>
                            <ul>
                                <li class="bullet-point">Review Lambda optimization techniques and apply to existing functions</li>
                                <li class="bullet-point">Practice Step Functions workflow design for complex scenarios</li>
                                <li class="bullet-point">Explore CloudWatch and X-Ray advanced features</li>
                                <li class="bullet-point">Experiment with security configurations and policies</li>
                                <li class="bullet-point">Plan integration architecture for final project</li>
                                <li class="bullet-point">Consider scalability challenges and solutions</li>
                            </ul>
                        </div>
                        
                        <div class="sub-section">
                            <h4>Skills Assessment</h4>
                            <ul>
                                <li class="bullet-point">Lambda function optimization proficiency</li>
                                <li class="bullet-point">Step Functions workflow design capability</li>
                                <li class="bullet-point">Observability implementation competency</li>
                                <li class="bullet-point">Security controls understanding</li>
                                <li class="bullet-point">Production deployment readiness</li>
                            </ul>
                        </div>

                        <div class="optimization-tip">
                            <h4>Final Project Preparation</h4>
                            <p>Day 3 culminates with a comprehensive integration project that challenges you to create an enterprise-grade serverless solution demonstrating mastery of all course concepts in a collaborative environment.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 23: Questions, Discussion, and Day 2 Wrap-up -->
            <section>
                <h2>Questions, Discussion, and Day 2 Wrap-up</h2>
                <div class="two-column">
                    <div class="column">
                        <div class="sub-section">
                            <h4>Technical Discussion Topics</h4>
                            <ul>
                                <li class="bullet-point">Lambda optimization challenges and real-world solutions</li>
                                <li class="bullet-point">Step Functions workflow design patterns and best practices</li>
                                <li class="bullet-point">Observability strategy implementation for distributed systems</li>
                                <li class="bullet-point">Security architecture decisions and trade-offs</li>
                                <li class="bullet-point">Performance vs cost optimization strategies</li>
                                <li class="bullet-point">Monitoring and alerting effectiveness</li>
                            </ul>
                        </div>

                        <div class="sub-section">
                            <h4>Strategic Questions for Consideration</h4>
                            <ul>
                                <li class="bullet-point">How do you balance Lambda performance optimization with cost management?</li>
                                <li class="bullet-point">When should you choose Step Functions over direct service integration?</li>
                                <li class="bullet-point">What observability strategy best fits your organizational needs?</li>
                                <li class="bullet-point">How do you implement effective defense-in-depth security?</li>
                                <li class="bullet-point">What are the key considerations for enterprise-scale deployments?</li>
                            </ul>
                        </div>
                    </div>
                    <div class="column">
                        <div class="sub-section">
                            <h4>Tomorrow's Preparation Checklist</h4>
                            <ul>
                                <li class="bullet-point">Review and consolidate today's lab implementations</li>
                                <li class="bullet-point">Consider real-world scaling scenarios and challenges</li>
                                <li class="bullet-point">Think about CI/CD pipeline requirements</li>
                                <li class="bullet-point">Plan approach for final integration project</li>
                                <li class="bullet-point">Prepare questions about production deployment</li>
                                <li class="bullet-point">Review enterprise security requirements</li>
                            </ul>
                        </div>

                        <div class="sub-section">
                            <h4>Knowledge Validation</h4>
                            <ul>
                                <li class="bullet-point">Can you optimize Lambda functions for production workloads?</li>
                                <li class="bullet-point">Are you comfortable designing complex Step Functions workflows?</li>
                                <li class="bullet-point">Do you understand the three pillars of observability implementation?</li>
                                <li class="bullet-point">Can you implement comprehensive security controls?</li>
                            </ul>
                        </div>

                        <div class="key-concept">
                            <h4>Day 3 Integration Challenge</h4>
                            <p>Tomorrow's final project will challenge you to create a comprehensive, enterprise-grade serverless solution that demonstrates mastery of all concepts learned, working collaboratively to solve real-world business problems.</p>
                        </div>

                        <div style="text-align: center; margin-top: 25px;">
                            <p style="font-size: 1.1em; color: var(--secondary-color); font-weight: 600;">
                                Excellent progress today! Thank you for your engagement.
                            </p>
                            <p style="font-size: 0.9em;">See you tomorrow for the final day of advanced integration!</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.min.js"></script>
    <script>
        Reveal.initialize({
            hash: true,
            transition: 'slide',
            transitionSpeed: 'default',
            backgroundTransition: 'fade',
            controls: true,
            progress: true,
            center: false,
            touch: true,
            loop: false,
            rtl: false,
            navigationMode: 'default',
            shuffle: false,
            fragments: true,
            fragmentInURL: false,
            embedded: false,
            help: true,
            showNotes: false,
            autoPlayMedia: null,
            preloadIframes: null,
            autoSlide: 0,
            autoSlideStoppable: true,
            mouseWheel: false,
            hideInactiveCursor: true,
            hideCursorTime: 5000,
            previewLinks: false,
            width: 1200,
            height: 700,
            margin: 0.04,
            minScale: 0.2,
            maxScale: 2.0,
            keyboard: true,
            overview: true,
            disableLayout: false,
            respondToHashChanges: true,
            history: false,
            display: 'block',
            viewDistance: 3,
            mobileViewDistance: 2,
            parallaxBackgroundImage: '',
            parallaxBackgroundSize: '',
            parallaxBackgroundHorizontal: null,
            parallaxBackgroundVertical: null
        });
    </script>
</body>
</html>